<%- include('../partials/header') %>

<% if (inventory && inventory.length > 0) { %>
  <p>To add another Item <a href="/inventory/new">Click here</a>
  <label for="">Sort options:</label>
    <select name="" id="">
    <option value="">Sort by item A-Z</option>
    <option value="">Sort by item Z-A</option>
    <option value="">Sort by Location A-Z</option>
    <option value="">Sort by Location Z-A</option>
    <option value="">Sort by Expire Date closest first</option>
    <option value="">Sort by Expire Date furthest first</option>
  </select>
  <table id="inventory-list">
    <thead>
      <tr>
        <th>Quantity</th>
        <th>Unit</th>
        <th>Item</th>
        <th>Date Added</th>
        <th>Date of Expire</th>
        <th>Location</th>
        <th>Favorite Item</th>
        <th>Add to GL</th>
        <th>Edit Item</th>
        <th>Delete Item</th>
      </tr>
    </thead>
    <tbody>
      <% inventory.forEach(function(inv) { %>
        <% inv.inventoryItem.forEach(function(i) { %>
        <tr>
          <td><%= i.quantity %></td>
          <td><%= i.unit %></td>
          <td><%= i.item.name %></td>
          <td><%= new Date(i.createdAt).toLocaleDateString() %></td>
          <td><%= i.expire ? new Date(i.expire).toLocaleDateString() : 'N/A' %></td>
          <td><%= i.location %></td>
          <td><%= i.favItem ? 'Yes' : 'No' %></td>
          <td>
            <form action="/item/<%= i._id %>" method="POST">
              <input type="hidden" name="item" value="<%= i.item._id %>">
              <button type="submit">Add</button>
            </form>
          </td>
          <td><a href="/inventory/<%= i._id %>/edit">Edit</a></td>
          <td>
              <form action="/item/<%= i._id %>?_method=DELETE" method="POST">
                <button type="submit">DELETE</button>
              </form>
          </td>
        </tr>
        <% }); %>
      <% }); %>
    </tbody>
  </table>
<% } else { %>
  <p>You don't have any inventories created yet! <a href="/inventory/new">Click here</a> to get started with building your inventory</p>
<% } %>

<%- include('../partials/footer') %>